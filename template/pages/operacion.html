{% load static %}


<div id="openModalOperacion" class="modalDialogPadre">
    <div>
        <a href="#close" title="Close" class="close">
            <i class="btn-outline-danger btn-outline-danger icofont-ui-close"></i>
        </a>

        <center>
            <u>
        <h1>Operaciones de la empresa {% for i in nomEmpresaU %}{{ i|title }}{% endfor %}</h1>
      </u>
            <hr>
        </center>
        <!--

data-show-refresh="true"
data-auto-refresh="true"
data-auto-refresh-interval="30"
data-auto-refresh-silent="true"
data-auto-refresh-status="true"
-->
        <table id="operacionTable" data-id-field="id" class="table scrollme " data-toggle="table" data-detail-view="true" data-detail-view-by-click="true" data-show-columns="true" data-search="True" data-show-fullscreen="true" data-locale="es-SP" data-pagination="true"
            data-detail-view-icon="false" data-show-export="false" data-url="operacion/operacion-list/">

            <div class="row ">

                <div class="col-sm-2">
                    <a href="#openModalHijoAddOperacion">
                        <i class="btn text-center btn-outline-success icofont-ui-add"> Agregar OP </i>
                    </a>
                </div>

                <thead class="thead-dark">
                    <tr>
                        <th data-field="btnInfo" data-detail-formatter="DetailFormatterButInfoOperacion" class="text-center">Info
                        </th>
                        <th data-field="nom_operacion" class="text-center">OP</th>
                        <th data-field="nomReferencia" class="text-center">Referencia</th>
                        <th data-field="estatus" class="text-center">Estatus</th>
                        <th data-field="nomColor" class="text-center">Color</th>
                        <th data-field="can_restante" class="text-center">Cant. Faltante</th>
                        <th data-field="can_total" class="text-center">Cant. Total</th>
                        <th data-field="created_at" class="text-center">Fecha creada</th>
                        <th data-field="btnAcci" data-detail-formatter="DetailFormatterButAccionPoperacion" class="text-center">
                            Accion</th>
                    </tr>
                </thead>
        </table>





        </div>
    </div>






    <div id="openModalHijoAddOperacion" class="modalDialogHijo">
        <div> <a href="#close" title="Close" class="close"><i class="btn-outline-danger icofont-ui-close"></i></a>



            <style>
                html,
                body {
                    width: 100%;
                    height: 100%;
                    margin: 0;
                    padding: 0;
                    font-family: 'Open Sans', sans-serif;
                    background-color: #3498db;
                }
                
                h1,
                h2,
                h3,
                h4,
                h5,
                h6 {
                    font-weight: 200;
                }
                
                a {
                    text-decoration: none;
                }
                
                p,
                li,
                a {
                    font-size: 14px;
                }
                
                fieldset {
                    margin: 0;
                    padding: 0;
                    border: none;
                }
                /* GRID */
                
                .twelve {
                    width: 100%;
                }
                
                .eleven {
                    width: 91.53%;
                }
                
                .ten {
                    width: 83.06%;
                }
                
                .nine {
                    width: 74.6%;
                }
                
                .eight {
                    width: 66.13%;
                }
                
                .seven {
                    width: 57.66%;
                }
                
                .six {
                    width: 49.2%;
                }
                
                .five {
                    width: 40.73%;
                }
                
                .four {
                    width: 32.26%;
                }
                
                .three {
                    width: 23.8%;
                }
                
                .two {
                    width: 15.33%;
                }
                
                .one {
                    width: 6.866%;
                }
                /* COLUMNS */
                
                .col {
                    display: block;
                    float: left;
                    margin: 0 0 0 1.6%;
                }
                
                .col:first-of-type {
                    margin-left: 0;
                }
                
                .container {
                    width: 100%;
                    max-width: 700px;
                    margin: 0 auto;
                    position: relative;
                }
                
                .row {
                    padding: 20px 0;
                }
                /* CLEARFIX */
                
                .cf:before,
                .cf:after {
                    content: " ";
                    display: table;
                }
                
                .cf:after {
                    clear: both;
                }
                
                .cf {
                    *zoom: 1;
                }
                
                .wrapper {
                    width: 100%;
                    margin: 30px 0;
                }
                /* STEPS */
                
                .steps {
                    list-style-type: none;
                    margin: 0;
                    padding: 0;
                    background-color: #fff;
                    text-align: center;
                }
                
                .steps li {
                    display: inline-block;
                    margin: 20px;
                    color: #ccc;
                    padding-bottom: 5px;
                }
                
                .steps li.is-active {
                    border-bottom: 1px solid #3498db;
                    color: #3498db;
                }
                /* FORM */
                
                .form-wrapper .section {
                    padding: 0px 20px 32px 40px;
                    -webkit-box-sizing: border-box;
                    -moz-box-sizing: border-box;
                    box-sizing: border-box;
                    background-color: #fff;
                    opacity: 0;
                    -webkit-transform: scale(1, 0);
                    -ms-transform: scale(1, 0);
                    -o-transform: scale(1, 0);
                    transform: scale(1, 0);
                    -webkit-transform-origin: top center;
                    -moz-transform-origin: top center;
                    -ms-transform-origin: top center;
                    -o-transform-origin: top center;
                    transform-origin: top center;
                    -webkit-transition: all 0.5s ease-in-out;
                    -o-transition: all 0.5s ease-in-out;
                    transition: all 0.5s ease-in-out;
                    text-align: center;
                    position: absolute;
                    width: 95.7%;
                    min-height: 300px
                }
                
                .form-wrapper .section h3 {
                    margin-bottom: 30px;
                }
                
                .form-wrapper .section.is-active {
                    opacity: 1;
                    -webkit-transform: scale(1, 1);
                    -ms-transform: scale(1, 1);
                    -o-transform: scale(1, 1);
                    transform: scale(1, 1);
                }
                
                .form-wrapper .button,
                .form-wrapper .submit {
                    background-color: #3498db;
                    display: inline-block;
                    padding: 8px 30px;
                    color: #fff;
                    cursor: pointer;
                    font-size: 14px !important;
                    font-family: 'Open Sans', sans-serif !important;
                    position: absolute;
                    right: 20px;
                    bottom: 20px;
                }
                
                .form-wrapper .submit {
                    border: none;
                    outline: none;
                    -webkit-box-sizing: content-box;
                    -moz-box-sizing: content-box;
                    box-sizing: content-box;
                    -webkit-appearance: none;
                    -moz-appearance: none;
                    appearance: none;
                }
                
                .form-wrapper input[type="text"],
                .form-wrapper input[type="password"] {
                    display: block;
                    padding: 10px;
                    margin: 10px auto;
                    background-color: #f1f1f1;
                    border: none;
                    width: 50%;
                    outline: none;
                    font-size: 14px !important;
                    font-family: 'Open Sans', sans-serif !important;
                }
                
                .form-wrapper input[type="radio"] {
                    display: none;
                }
                
                .form-wrapper input[type="radio"]+label {
                    display: block;
                    border: 1px solid #ccc;
                    width: 100%;
                    max-width: 100%;
                    padding: 10px;
                    -webkit-box-sizing: border-box;
                    -moz-box-sizing: border-box;
                    box-sizing: border-box;
                    cursor: pointer;
                    position: relative;
                }
                
                .form-wrapper input[type="radio"]+label:before {
                    content: "✔";
                    position: absolute;
                    right: -10px;
                    top: -10px;
                    width: 30px;
                    height: 30px;
                    line-height: 30px;
                    border-radius: 100%;
                    background-color: #3498db;
                    color: #fff;
                    display: none;
                }
                
                .form-wrapper input[type="radio"]:checked+label:before {
                    display: block;
                }
                
                .form-wrapper input[type="radio"]+label h4 {
                    margin: 15px;
                    color: #ccc;
                }
                
                .form-wrapper input[type="radio"]:checked+label {
                    border: 1px solid #3498db;
                }
                
                .form-wrapper input[type="radio"]:checked+label h4 {
                    color: #3498db;
                }
            </style>





            <div class="container">
                <div class="wrapper">
                    <ul class="steps">
                        <li class="is-active">Operación</li>
                        <li>Detalle</li>
                        <li>Talla</li>
                    </ul>
                    <form id="addOperacion" autocomplete="off" class="form-wrapper">

                        <fieldset class="section is-active">
                            <h3>
                                Registro de Operación
                                <br>{% for i in nomEmpresaU %}{{ i|title }}{% endfor %}

                            </h3>

                            <label for=""><p style="text-align: right important;" class="text-sm-left">Nombre Operación</p> </label>
                            <input type="text" name="nombreOP" id="name" placeholder="Nombre Operacion">

                            <label for=""><p class="text-sm-left">Cantidad Operación  </p></label>
                            <input type="number" name="can_totalOP" id="" class="form-group cm-number" placeholder=" Total">
                            <input type="number" hidden="True" name="idEmpresaOP" value="{{ lastIdEmpresa }}">
                            <input type="number" hidden="True" name="idUserOP" value="{{ login_user_id}}">
                            <div class="button">Detalle</div>

                        </fieldset>



                        <fieldset class="section">
                            <h3>Contenido

                            </h3>
                            <div class="row cf">
                                <div class="four col bg-dange">
                                    <h4>Referencia</h4>
                                    <input type="text" list="ReferenciaSelect" placeholder="Buscar Referencia..." class="form-control" style="width:150px;">
                                    <datalist id="ReferenciaSelect">
                                        {% for ReferenciaSelect in allReferencia %}
                                        <option value="{{ReferenciaSelect.nom_referencia}}">{{ReferenciaSelect.nom_referencia}}
                            
                                        
                                        <input type="number" hidden="True" name="idReferenciaOP" value="{{ ReferenciaSelect.id }}">
                                        </option>
                                        {% endfor %}
                                    </datalist>
                                </div>

                                <div class="four col">
                                    <h4>Color</h4>
                                    <input type="text" list="Color" required placeholder="Buscar Color..." class="form-control" style="width:150px;">
                                    <datalist id="Color" class="select ">
                                        {% for resultsColor in allColor %}                                        
                                        <option value="{{resultsColor.nom_color}}">
                                        {{resultsColor.nom_color}}
                                        </option>
                                        <input type="number" hidden="True" name="idColorOp" value="{{ resultsColor.id }}">
                                        {% endfor %}
                                    </datalist>

                                </div>

                                <div class="four col">
                                    <h4>Descripcion</h4>

                                    <input type="text" name="notaDes" placeholder="Nota - Descripcion" style="width:150px;">

                                </div>
                            </div>



                            <div class="button">Talla</div>
                        </fieldset>
                        <fieldset class="section">
                            <h3>Registro de Talla</h3>
                            <table id="TallaTable" data-id-field="id" class="table table-sm" data-toggle="table" data-detail-view="true" data-detail-view-by-click="false" data-show-columns="false" data-search="false" data-show-fullscreen="false" data-locale="es-SP" data-pagination="true"
                                data-detail-view-icon="false" data-url="talla/talla-list/">
                                <thead class="thead-dark ">
                                    <tr>
                                        <th data-field="nom_talla" class="text-center">Nombre Talla </th>
                                        <th data-field="btnAddTalla" class="text-center">Cantidad</th>
                                    </tr>
                                </thead>
                            </table>
                            <!-- <input class="submit button" type="submit" value="Sign Up"> -->


                            <input class="submit button" type="submit" onclick="ModalOperacion()" value="Guardar">
                        </fieldset>


                        <!-- 
                        <fieldset class="section">
                            <br>
                            <h3>¡Operación creada con exito!</h3>
                            <p></p> 
                        <div class="button">Reset Form</div>
                       </fieldset> -->
                    </form>
                </div>
            </div>



            <script>
                function ModalOperacion() {
                    window.location.href = "/";



                };
                $(document).ready(function() {
                    $(".form-wrapper .button").click(function() {
                        var button = $(this);
                        var currentSection = button.parents(".section");
                        var currentSectionIndex = currentSection.index();
                        var headerSection = $('.steps li').eq(currentSectionIndex);
                        currentSection.removeClass("is-active").next().addClass("is-active");
                        headerSection.removeClass("is-active").next().addClass("is-active");

                        $(".form-wrapper").submit(function(e) {
                            e.preventDefault();
                        });

                        if (currentSectionIndex === 3) {
                            $(document).find(".form-wrapper .section").first().addClass("is-active");
                            $(document).find(".steps li").first().addClass("is-active");
                        }
                    });
                });
            </script>





            <!--        <form id="addOperacion" autocomplete="off" class="">
                <div class=" content p-3 mb-2 bg-dar text-white " rows="3">
                    <div class="border">
                        <center>
                            <h1>Agregar nueva OP para {% for i in nomEmpresaU %}{{ i|title }}{% endfor %}</h1>
                            <hr>
                        </center>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Nom. Operacion </label>
                                <div class="input-group">
                                    <div class="02"></div>
                                    <span class="input-group-addon">
                                              <i class="fa fa-user"></i>
                                            </span>
                                    <input class="form-control" type="text" name="nombreOP" placeholder="Nombre Operacion" required>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Referencia</label>
                                <div class="input-group">
                                    <span class="input-group-addon">
                  <i class="fa fa-user"></i>
                </span>


                                    <input type="text" list="ReferenciaSelect" name="idReferenciaOP" required Placeholder="Buscar Referencia..." class="form-control" style="width:300px;">
                                    <datalist id="ReferenciaSelect">
                      {% for results in allReferencia %}
                      <option value="{{results.id}}">{{results.nom_referencia}}</option>
                      {% endfor %}
                    </datalist>



                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Color</label>
                                <div class="input-group">
                                    <span class="input-group-addon">
                  <i class="fa fa-user"></i>
                </span>

                                    <input type="text" list="Color" name="idColorOp" required Placeholder="Buscar Color..." class="form-control" style="width:300px;">
                                    <datalist id="Color">
                  {% for results in allColor %}
                  <option value="{{results.id}}">{{results.nom_color}}</option>
                  {% endfor %}
                </datalist>


                                </div>
                            </div>
                        </div>


                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Can Total </label>
                                <div class="input-group">
                                    <span class="input-group-addon">
                  <i class="fa fa-user"></i>
                </span>
                                    <input class="form-control" type="number" name="can_totalOP" placeholder="Can total Operacion" required>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Descripcion </label>
                                <div class="input-group">
                                    <span class="input-group-addon">
                  <i class="fa fa-user"></i>
                </span>
                                    <input class="form-control" type="text" name="NotaOp" placeholder="Nota/Descripcion">
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <input type="number" hidden="True" name="idEmpresaOP" value="{{ lastIdEmpresa }}">
                            <input type="number" hidden="True" name="idUserOP" value="{{ login_user_id}}">
                            <button class="btn btn-outline-primary form-" type="submit">Guardar</button>
                        </div>
                    </div>
                </div>

            </form>
 -->
        </div>




    </div>






    <div id="Scripts">

        <!--table operacion-->
        <script>
            $('#operacionTable').SetEditable();

            function DetailFormatterButInfoOperacion(index, row) {
                //crea y renderiza la tabla
                return '<div class="row">' +
                    '<div class="col-sm-3">' +
                    '</div>' +

                    '<div class="col-sm-6">' +
                    '<table " class="table border border-info ">' +
                    '<thead class="thead-dark">' +
                    '<tr>' +
                    '<th class="text-center">Talla</th>' +
                    '<th class="text-center">Talla restante</th>' +
                    '<th class="text-center">Total</th>' +
                    '<th class="text-center">Eliminar talla</th>' +

                    '</tr>' +
                    '</thead><tbody calss="table-striped table  table-sm  table-bordered table-hover" id="listKill' + row.id + '"> </tbody>' +
                    '</table>' + '<script>' + 'tallas(' + row.id + ');</' + 'script>' +
                    '</div>' +
                    '</div>';

            }

            function tallas(idOp) {
                $.ajax({
                    url: '{% url "tallaOP-list" %}',
                    data: {

                        'idOp': idOp,
                    },
                    dataType: 'json',
                    success: function(response) {



                        var len = response.length;
                        for (var i = 0; i < len; i++) {
                            var id = response[i].id;
                            var canTalla = response[i].can_talla;
                            var nombreTalla = response[i].nom_talla;
                            var res_talla = response[i].res_talla;

                            if (res_talla == null) {
                                res_talla = canTalla;
                            }

                            var tr_str = "<tr>" +
                                "<td style='text-align:center'>" + nombreTalla + "</td>" +
                                "<td style='text-align:center'>" + res_talla + "</td>" +
                                "<td style='text-align:center'>" + canTalla + "</td>" +

                                "<td style='text-align:center'>" + "<button class='btn btn-sm btn-block btn-outline-danger  icofont-ui-remove' onclick='reoveCanTalla(" + id + ")'> " + "</td>" +
                                "</tr>";
                            $('#listKill' + idOp).append(tr_str);
                        }

                    }
                });



            }

            function reoveCanTalla(idCantalla) {
                $.ajax({
                    url: '{% url "TallaOP_ajax_delete" %}',
                    data: {
                        'id': idCantalla,
                    },
                    dataType: 'json',
                    success: function(data) {
                        window.location.reload();

                    }
                });
            }


            function DetailFormatterButAccionPoperacion(index, row) {
                return '<div class="row">' +
                    '<div class="col-sm-3 ">' +
                    '<form id="addTallaOP-' + row.id + '" autocomplete="off" class="border">{% csrf_token %}' +
                    '<center><div class="">Agregar Talla: ' + row.nom_operacion + '</div></center>' +
                    '<input type="text" list="BuscarTalla"  name="idTalla"  required Placeholder="Buscar talla..." class="form-control" >' +
                    '<datalist id="BuscarTalla">' +
                    '{% for results in allTalla %}' +
                    '<option  value="{{results.id}}">{{results.nom_talla}} #{{results.num_talla}}</option>' +
                    '{% endfor %}' +
                    '</datalist>' +
                    '<input type="number"  name="cantTalla"  class="form-control" Placeholder="Cantidad Talla..." >' +
                    '<input type="number" hidden="True" name="idOperacionTalla" value="' + row.id + '">' +
                    '<input type="number" hidden="True" name="idEmpresaOPTalla" value="{{ lastIdEmpresa }}">' +
                    '<input type="number" hidden="True" name="idUserOPTalla" value="{{ login_user_id}}">' +
                    '<button class="btn btn-outline-primary form-control btn_block" type="submit" >Guardar</button>' +


                    '</form>' +
                    '</div>' +


                    '<div class="col-sm-3">' +
                    '<form id="editarIpoperacion" style="display: inline"  >{% csrf_token %}' +
                    '<div class="form-group"><label>Estatus</label>' +
                    '<select class="form-group" id="estatusUP">' +
                    '<option value="' + row.estatus + '">' + row.estatus + '</option>' +
                    '<option value="A">Activo</option>' +
                    '<option value="I">Inactivo</option>' +
                    '</select></div>' +
                    '<input type="number" hidden="True" name="idEmpresaUPOP" value="{{ lastIdEmpresa }}">' +
                    '<input type="number" hidden="True" name="idUserUPOP" value="{{ login_user_id}}">' +
                    '<input type="number" hidden="True" name="idIpoperacionUPOP" value="' + row.id + '"' +

                    '</div>' +
                    '<input id="EditPoperacionBtn-' + row.id + '" value="Actualizar registro" type="submit" onclick="editPoperacion(' + row.id + ')" class="btn-md  btn btn-outline-warning btn-rounded  " >' +





                    '</div>' +
                    '<div class="col-sm-1">' + '<button value="" onclick="removeOP(' + row.id + ')"  id="buttonEliminarPoperacion" class="btn btn-outline-danger icofont-ui-remov ">Eliminar</button>' +
                    '</div>' +
                    '</form>' +



                    '<script>' +
                    ' $("form#addTallaOP-' + row.id + '").submit(function() { ' +
                    'var idTalla          = $("input[name=\'idTalla\']").val().trim();' +
                    'var cantTalla        = $("input[name=\'cantTalla\']").val().trim();' +
                    'var idOperacionTalla = $("input[name=\'idOperacionTalla\']").val().trim();' +
                    'var idEmpresaOPTalla = $("input[name=\'idEmpresaOPTalla\']").val().trim();' +
                    'var idUserOPTalla    = $("input[name=\'idUserOPTalla\']").val().trim();' +

                    'if (idTalla &&  cantTalla && idOperacionTalla && idEmpresaOPTalla && idUserOPTalla' +
                    ') {' +

                    '$.ajax({' +
                    'url: "{% url "TallaOP_ajax_create" %}",' +
                    'data: {' +

                    '\'idTalla\'    : idTalla,' +
                    '\'cantTalla\'  : cantTalla,' +
                    '\'idOperacionTalla\' : idOperacionTalla,' +
                    '\'idEmpresaOPTalla\' :idEmpresaOPTalla,' +
                    '\'idUserOPTalla\'    :idUserOPTalla' +
                    '},' +

                    'dataType: \'json\',' +
                    'success: function (data) {window.location.reload();' +
                    'if (data.user) {' +
                    'appendToUsrTable(data.user);' +
                    '}' +
                    '}' +
                    '});' +
                    '} else {' +
                    '   alert("All fields must have a valid value.");' +
                    '}' +
                    '$("form#addPoperacion").trigger("reset");' +
                    'return false;' +
                    '});' +
                    '</' + 'script>';

            }
        </script>





        <!--create operacion-->
        <script>
            $("form#addOperacion").submit(function() {


                var NotaDesOp = $('input[name="notaDes"]').val().trim();
                var can_totalOP = $('input[name="can_totalOP"]').val().trim();
                var nomOperacion = $('input[name="nombreOP"]').val().trim();
                var idReferenciaOP = $('input[name="idReferenciaOP"]').val().trim();
                var idColorOP = $('input[name="idColorOp"]').val().trim();
                var idEmpresaOP = $('input[name="idEmpresaOP"]').val().trim();
                var idUserOP = $('input[name="idUserOP"]').val().trim();

                if (can_totalOP && idReferenciaOP && idColorOP && nomOperacion && idEmpresaOP && idUserOP) {

                    // Create Ajax Call
                    $.ajax({
                        url: '{% url "Operacion_ajax_create" %}',
                        data: {

                            'can_totalOP': can_totalOP,
                            'idReferenciaOP': idReferenciaOP,
                            'idColorOP': idColorOP,
                            'nomOperacion': nomOperacion,
                            'idEmpresaOP': idEmpresaOP,
                            'idUserOP': idUserOP,
                            'NotaOp': NotaDesOp
                        },
                        dataType: 'json',
                        success: function(data) {
                            var idOperacion = data.lastIdOperacion;
                            var arrayTallas = data.tallasEmpresa;
                            btnTallaAdd(idOperacion, arrayTallas, idUserOP);


                        }

                    });


                } else {
                    console.log("All fields must have a valid value.");
                }
                $('form#addPoperacion').trigger("reset");
                return false;
            });

            function btnTallaAdd(idOperacion, arrayTallas, idUserOP) {
                var arrayTallaOp = JSON.parse(arrayTallas);
                console.log("I-id operacion ", idOperacion);
                let idOpeT = idOperacion;
                arrayTallaOp.forEach(function(obj) {
                    //console.log(obj);
                    //console.log("id talla ", obj.id);
                    //console.log("id empresa ", obj.empresa_id);
                    console.log("II- id operacion ", idOpeT);
                    var idTallaOP = obj.id;
                    var idEmpresa = obj.empresa_id;


                    var canTallaOP = $('input[name="inputTalla-' + idTallaOP + '"]').val().trim();
                    $.ajax({
                        url: '{% url "TallaOP_ajax_create" %}',
                        data: {
                            'idTalla': idTallaOP,
                            'cantTalla': canTallaOP,
                            'idOperacionTalla': idOpeT,
                            'idEmpresaOPTalla': idEmpresa,
                            'idUserOPTalla': idUserOP

                        },
                        dataType: 'json',
                        success: function(data) {
                            console.log("passsssssss");
                        }



                    });






                });

            }
        </script>
        <!--editar ipoperacion-->
        <script>
            function editPoperacion(id) {



                var estatusUP = document.getElementById("estatusUP").value;
                var idEmpresaUP = $('input[name="idEmpresaUPOP"]').val().trim();
                var idUserUP = $('input[name="idUserUPOP"]').val().trim();



                if (estatusUP && idEmpresaUP && idUserUP) {

                    // Create Ajax Call
                    $.ajax({
                        url: '{% url "Operacion_ajax_update" %}',
                        data: {
                            'estatusUP': estatusUP,
                            'idEmpresaUP': idEmpresaUP,
                            'idUserUP': idUserUP,
                            'idIpoperacionUP': id



                        },
                        dataType: 'json',
                        success: function(data) {
                            if (data.user) {
                                appendToUsrTable(data.user);
                            }
                        }
                    });

                } else {
                    console.log("All fields must have a valid value.");
                }
            }
        </script>
        <!--Delete poperacion-->
        <script>
            function removeOP(idOperacion) {


                $.ajax({
                    url: '{% url "Operacion_ajax_delete" %}',
                    data: {
                        'id': idOperacion,
                    },
                    dataType: 'json',
                    success: function(data) {

                        window.location.reload();



                    }
                });
            }
        </script>

    </div>